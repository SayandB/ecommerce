<template>
  <main>
   <nav class="white">
            <div class="nav-wrapper">
              <a href="/MainPage" class="brand-logo red-text">
                <img src = "../assets/famazonwhite.jpg" ></a>
                <ul class="hide-on-med-and-down right">               
                    <li>    
                        <div class="center row">
                            <div class="input-field col s6 s12 red-text">
                              <i @click="getProducts" class="material-icons prefix">search</i>
                              <input type="text" v-model = 'productName' placeholder="search" id="autocomplete-input" class="autocomplete red-text">
                            </div>
                          </div>         
                      </li>                     
                    <li>
                      <a href="/About" class="red-text">About</a>
                    </li>
                    <li>
                      <router-link to="/CartPage" class="red-text"><i @click="showcart" class="material-icons" id="cart">add_shopping_cart</i></router-link>
                    </li>
                    <li >
                        <router-link class="red-text" v-if= "isLogin" to="/OrderHistory">Hello </router-link>
                        <a  class="red-text" v-else href="/Login">Login</a>
                    </li>
                    <li>
                      <router-link class = "red-text" v-if ="isLogin" to="/MainPage">Logout</router-link>
                    </li>
                </ul>
            </div>
          </nav> 
    <categories-bar></categories-bar>   
  </main>
</template>

<style scoped>


i{
  cursor: pointer;
}
.nav-wrapper{
  overflow: hidden;
}
#topbarsearch .input-field .prefix { 
            width:0rem !important;    
            }        
        #topbarsearch nav ul li:hover, nav ul li.active {
                background-color: none !important;
            }
        .input-field .prefix ~ input, .input-field .prefix ~ textarea, .input-field .prefix ~ label, .input-field .prefix ~ .validate ~ label, .input-field .prefix ~ .autocomplete-content{
            margin-left: 1rem !important;
            }
</style>    

<script>
import {mapActions, mapGetters} from 'vuex'
import CategoriesBar from '@/components/CategoriesBar'
export default {
  name: 'SearchBar',
  components: {
    CategoriesBar
  },
  data() {
    return {
      productName: '',
      token: ''
    }
  },
  computed: {
    ...mapGetters(['logindetails', 'loginStatus']),
      isActiveUser: function () {
        return this.logindetails
      },
    isLogin: function () {
      return this.loginStatus
    }
  },
  methods: {
  ...mapActions(['showProduct']),
    getProducts (){
      this.$store.dispatch('showProduct', this.productName)
    },
    showcart () {
  		this.$store.dispatch('showingCart',{
  			token: isActiveUser.userId
  		})
  		this.$router.push('/cartpage')
  	}
  },
  mounted() {
      this.getProducts();
   }
}
</script>
